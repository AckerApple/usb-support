{"version":3,"sources":["./src/app/mapController.function.ts","./src/environments/environment.ts","../index.shared.ts","../shared/enums.ts","./src/app/app.utils.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/decodeControllerButtonStates.function.ts","../shared/delayLog.function.ts","./src/app/app-routing.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import delayLog from \"../../../shared/delayLog.function\";\nimport { Subject, Subscription } from \"rxjs\";\nimport { GameControlEvents } from \"../../../server/GameControlEvents\";\n\nexport default function mapController(\n  gameController: GameControlEvents\n): Promise<void> {\n  return new Promise(res => () => {\n    const subs = new Subscription()\n    const gcChangeListener = new GameControlChangeListener(gameController)\n\n    this.subs.add(\n      gameController.notIdle.subscribe(() => gcChangeListener.handler()),\n      gcChangeListener.completed.subscribe(() => {\n        subs.unsubscribe()\n        res()\n      })\n    )\n\n    gcChangeListener.askForButton()\n  })\n}\n\nclass GameControlChangeListener {\n  completed: Subject<void> = new Subject()\n\n  constructor(public gameController: GameControlEvents) {}\n\n  getNextQuestion() {\n    return Object.keys(this.gameController.map).find(\n      (key) => this.gameController.map[key] === null\n    )\n  }\n\n  askForButton() {\n    const key = this.getNextQuestion();\n    delayLog(\"\\x1b[36mPush the \" + key + \" key\\x1b[0m\");\n  }\n\n  // listener from button press\n  handler (): Promise<void> {\n    const data = this.gameController.lastData\n    const key = this.getNextQuestion()\n    const diffs = this.gameController.filterIdleDifferences(data)\n    const diffKeys = Object.keys(diffs)\n    const map = this.gameController.map\n\n    if (diffKeys.length === 0) {\n      return;\n    } else if (diffKeys.length > 1) {\n      console.log(\"multiple buttons activated\");\n    } else {\n      const pos = Number(diffKeys[0])\n      const value = diffs[diffKeys[0]]\n      const alreadySet = Object.keys(map).find((key) =>\n        map[key] && map[key].pos === pos && map[key].value === value\n      );\n\n      if (alreadySet) {\n        console.log(\"Key already set: \" + alreadySet, { pos, value });\n      } else {\n        this.gameController.map[key] = {\n          pos, value, idle: this.gameController.idle[pos], updatedAt: Date.now()\n        }\n        // console.log(gameController.map);\n        console.log(\"SAVED KEY: \" + key + \" as \", { pos, value })\n      }\n    }\n\n    console.log();\n\n    if (this.getNextQuestion()) {\n      this.askForButton()\n    } else {\n      console.log(\"Buttons mapped\", this.gameController.map);\n      this.completed.next()\n    }\n  }\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { ControllerConfigs, DeviceProductLayout, IDeviceMeta } from \"./shared/typings\";\n\nexport function isDeviceController(device: IDeviceMeta): boolean {\n  return (device.usage === 5 && device.usagePage === 1)\n  || (device.usage === 4 && device.usagePage === 1)\n  || device.product.toLowerCase().indexOf(\"controller\") >= 0\n  || device.product.toLowerCase().indexOf(\"game\") >= 0\n  || device.product.toLowerCase().indexOf(\"joystick\") >= 0;\n}\n\nexport function devicesMatch(device: IDeviceMeta, lDevice: IDeviceMeta): boolean {\n  return device === lDevice || device.productId === lDevice.productId && device.vendorId === lDevice.vendorId\n}\n\nexport function cleanseDeviceEvent(\n  device: DeviceProductLayout,\n  event: number[]\n) {\n  return event.map((number, index) =>\n    cleanseDeviceEventPos(device, number, index)\n  )\n}\n\nfunction cleanseDeviceEventPos(\n  device: DeviceProductLayout, number: number, index: number\n){\n  return device.ignoreBits.includes(index) ? 0 : number\n}\n\nexport function isDeviceEventsSame(\n  device: DeviceProductLayout, event0: number[], event1: number[]\n): boolean {\n  const castedEvent0 = cleanseDeviceEvent(device, event0)\n  const castedEvent1 = cleanseDeviceEvent(device, event1)\n  return eventsMatch(castedEvent0, castedEvent1)\n}\n\nexport function eventsMatch(event0: number[], event1: number[]) {\n  return event0.every((item,index) => item === event1[index])\n}\n\nexport function getControlConfigByDevice(configs: ControllerConfigs, device: IDeviceMeta) {\n  const vendorId = String(device.vendorId)\n  const productId = String(device.productId)\n  const products = configs[vendorId]\n\n  if (!products) {\n    return\n  }\n\n  return products[productId]\n\n}\n\nexport function savedControllerToConfigs(\n  controller: DeviceProductLayout,\n  controlConfigs: ControllerConfigs = {}\n) {\n  const {vendorId, productId} = controller.meta\n  const vendorOb = controlConfigs[vendorId] = controlConfigs[vendorId] || {}\n\n  vendorOb[productId] = controller\n\n  return controlConfigs\n}","export enum SocketMessageType {\n  // client side\n  UNSUBSCRIBEDEVICE = 'unsubscribeDevice',\n  LISTENTODEVICE = 'listenToDevice',\n  REFRESH = 'refresh',\n  GETSAVEDCONTROLLERS = 'getSavedControllers',\n  SAVECONTROLLERS = 'save_controllers',\n\n  // server side\n  DEVICEEVENT_CHANGE = 'deviceEvent.change',\n  LISTENERS = 'listeners',\n  SAVEDCONTROLLERS = 'savedControllers',\n  DEVICES = 'devices',\n  ERROR = 'error',\n}\n","import { DeviceProductLayout, IDeviceMeta } from '../../../shared/typings'\n\nexport interface IDeviceMetaState extends DeviceProductLayout {\n  subscribed?: boolean\n  recording?: boolean\n  lastEvent?: number[]\n  pressed?: string[] // populated if matched to savedController\n}\n\nexport const testController: IDeviceMeta = {\n  path: 'test-path',\n  interface: -1,\n  usage: -1,\n  usagePage: -1,\n  productId: -1,\n  vendorId: -32,\n  product: 'test-product',\n  manufacturer: 'test-manu',\n}\n\nexport interface DebugData {\n  state: 'initializing' | 'constructing' | 'constructed' | 'message-received' | 'socket opened'\n  messages: number\n  url: string\n  socket: Record<string, any>,\n  lastWssData: Record<string, any>,\n  lastPayload: Record<string, any>,\n  lastLogs: {\n    info: Record<string, any>\n    error?: Record<string, any>\n  }\n}\n\nexport function getDeviceLabel(device: IDeviceMeta) {\n  let stringRef = device.product?.trim() || ''\n\n  if (device.manufacturer) {\n    stringRef += ' by '+ device.manufacturer\n  }\n\n  return stringRef\n}\n\nexport function download(filename:string, text: string) {\n  var element = document.createElement('a');\n  element.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(text));\n  element.setAttribute('download', filename);\n\n  element.style.display = 'none';\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n}\n\nexport function copyText(text: string) {\n  /* Get the text field */\n  var copyText = document.createElement('textarea');\n  copyText.value = text\n  document.body.appendChild(copyText)\n\n  /* Select the text field */\n  copyText.select();\n  copyText.setSelectionRange(0, 99999); /* For mobile devices */\n\n  /* Copy the text inside the text field */\n  document.execCommand(\"copy\");\n\n  document.body.removeChild(copyText)\n  // copyText.parentNode.removeChild(copyText)\n}\n","import { Component } from '@angular/core'\nimport { DeviceProductLayout, ControllerConfigs, WssMessage, IDeviceMeta } from '../../../shared/typings'\nimport { SocketMessageType } from '../../../shared/enums'\nimport GameControlEvents from '../../../server/GameControlEvents'\nimport mapController from './mapController.function'\nimport { socketPort } from '../../../shared/config.json'\nimport { getControlConfigByDevice, eventsMatch, devicesMatch, isDeviceController } from '../../../index.shared'\nimport decodeDeviceMetaState from './decodeControllerButtonStates.function'\nimport { ack } from 'ack-x/js/ack'\nimport { copyText, DebugData, download, getDeviceLabel, IDeviceMetaState, testController } from './app.utils'\n\nconst socketHost = window.location.hostname\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'webapp'\n  wsUrl = `ws://${socketHost}:${socketPort}`\n  connection: WebSocket\n  reconnectInterval: number\n\n  devices: IDeviceMetaState[] = []\n  listeners: IDeviceMetaState[] = []\n  controllers: IDeviceMeta[] = []\n  nonControllers: IDeviceMeta[] = []\n  savedControllers: ControllerConfigs = {}\n  savedController: DeviceProductLayout // One controller being reviewed\n\n\n  debug: DebugData = {\n    state: 'initializing',\n    messages: 0,\n    url: this.wsUrl,\n    socket: {},\n    lastWssData: {},\n    lastPayload: {},\n    lastLogs: {\n      info:{}\n    }\n  }\n\n  constructor() {\n    this.debug.state = 'constructing'\n    window.onerror = err => this.error(typeof(err) === 'string' ? new Error(err) : err)\n  }\n\n  ngOnInit(){\n    this.log('connecting to websocket', this.wsUrl)\n    try {\n      this.connect()\n      this.debug.state = 'constructed'\n      this.log('web socket connected')\n    } catch (err) {\n      this.error(err, {\n        message: 'Could not connect to web sockets',\n      })\n    }\n  }\n\n  connect() {\n    this.connection = new WebSocket(this.wsUrl)\n    this.connection.onopen = () => {\n      this.log('web socket handshake successful')\n\n      if (this.reconnectInterval) {\n        clearInterval(this.reconnectInterval)\n        delete this.reconnectInterval\n      }\n\n      this.fetchUsbDevices()\n      this.fetchSavedControllers()\n      this.debug.state = 'socket opened'\n\n      this.connection.onclose = () => {\n        this.reconnectInterval = setInterval(() => {\n          this.log({message: 'attempting ws reconnect...'})\n          this.connect()\n        }, 3000)\n      }\n    }\n\n\n    this.connection.onerror = (ev: Event): any => {\n      this.error(\n        ev,\n        {message: `Socket error`},\n      )\n    }\n\n    this.connection.onmessage = (e) => {\n      this.debug.state = 'message-received'\n      ++this.debug.messages\n\n      let data: WssMessage\n\n      try {\n        data = JSON.parse(e.data)\n        this.debug.lastWssData = data\n      } catch (err) {\n        console.log('e.data', e)\n        this.error(err, 'client message failed');\n        (this.debug.socket as any).error = err\n      }\n\n      try {\n        this.handleMessage(data)\n      } catch (err) {\n        this.error({error:err, data}, `error executing message ${data.type}`);\n        throw err\n      }\n    }\n  }\n\n  mapController(controller: GameControlEvents) {\n    mapController(controller)\n  }\n\n  toggleDeviceRecord(deviceMeta: IDeviceMetaState) {\n    deviceMeta.recording = !deviceMeta.recording\n  }\n\n  devicesUpdate(data: IDeviceMeta[]) {\n    data.forEach((device, index) => {\n      this.devices[index] = this.devices[index] || {meta: device, map: {}}\n      this.devices[index].meta = device\n    })\n\n    const devices = this.devices.map(device => device.meta)\n    this.controllers = devices.filter(device => isDeviceController(device))\n    this.nonControllers = devices.filter(device => !isDeviceController(device))\n\n    this.log('controllers', this.controllers)\n    this.log('other devices', this.nonControllers)\n  }\n\n  handleMessage(data: WssMessage) {\n    switch (data.type) {\n      case SocketMessageType.DEVICES:\n        this.devicesUpdate(data.data)\n        break;\n\n      case SocketMessageType.SAVEDCONTROLLERS:\n        if (data.data) {\n          this.savedControllers = data.data\n          this.log('savedControllers', data.data)\n        }\n        break;\n\n      case SocketMessageType.LISTENERS:\n        this.onListeners(data.data)\n        break\n\n      case SocketMessageType.DEVICEEVENT_CHANGE:\n        this.onDeviceEventChange(data.data.event, data.data.device)\n        break\n\n      case SocketMessageType.ERROR:\n        this.error(data.data)\n        break\n\n      default:\n        this.warn('unknown event type', data.type)\n    }\n  }\n\n  onListeners(devices: IDeviceMeta[]) {\n    this.log({message: `listeners update received`, devices})\n\n    this.listeners.length = devices.length\n\n    devices.forEach((device,index) => {\n      this.listeners[index] = this.listeners[index] || {\n        meta: device, subscribed: true, map: {}\n      }\n\n      const saved = this.getControlConfigByDevice(device)\n\n      if (saved) {\n        Object.assign(this.listeners[index], saved)\n      }\n\n      this.listeners[index].meta = device\n    })\n\n    this.controllers.forEach(controller => {\n      const find = this.listeners.find(lDevice =>\n        devicesMatch(controller, lDevice.meta)\n      )\n\n      if (find) {\n        return (controller as any).subscribed = true\n      }\n      delete (controller as any).subscribed\n    })\n\n  }\n\n  getControlConfigByDevice(device: IDeviceMeta): DeviceProductLayout | undefined {\n    return getControlConfigByDevice(this.savedControllers, device)\n  }\n\n  onDeviceEventChange(event: number[], device: IDeviceMeta) {\n    const matchedListener = this.listeners.find(\n      listener => devicesMatch(listener.meta, device)\n    )\n\n    // no match? no work to do\n    if (!matchedListener) {\n      return\n    }\n    matchedListener.lastEvent = event\n    const listener = this.getDeviceListener(device)\n    if (listener) {\n      this.processDeviceUpdate(matchedListener)\n    }\n  }\n\n  getDeviceListener(device: IDeviceMeta): IDeviceMetaState | undefined {\n    return this.listeners.find(listener => devicesMatch(listener.meta, device))\n  }\n\n  processDeviceUpdate(matchedListener: IDeviceMetaState) {\n    const pressedKeyNames = decodeDeviceMetaState(matchedListener)\n    matchedListener.pressed = pressedKeyNames\n    matchedListener.map = matchedListener.map || {}\n\n    if(matchedListener.recording && !pressedKeyNames.length) {\n      this.recordDeviceEvent(matchedListener)\n    }\n\n    // loop each known button and set its pressed property\n    Object.entries(matchedListener.map).forEach(current => {\n      const key = current[0]\n      current[1].pressed = pressedKeyNames.includes(key)\n    })\n  }\n\n  recordDeviceEvent(matchedListener: IDeviceMetaState) {\n    const idleMap = matchedListener.idle\n    const pressedKeyNames = matchedListener.pressed\n    const isIdle = eventsMatch(matchedListener.lastEvent, idleMap)\n    if (isIdle) {\n      return\n    }\n\n    const event = matchedListener.lastEvent\n    for (let index = event.length - 1; index >= 0; --index) {\n      if (event[index] != idleMap[index]) {\n        matchedListener.map[`unknown${Object.keys(matchedListener.map).length}`] = {\n          pos: index,\n          value: event[index],\n          idle: idleMap[index],\n          updatedAt: Date.now(),\n        }\n      }\n    }\n\n    console.log('5 recording event came in', {\n      map: matchedListener.map, pressedKeyNames, lastEvent:matchedListener.lastEvent\n    })\n  }\n\n  confirmDeleteController(controller: DeviceProductLayout) {\n    if (!confirm(`confirm delete ${getDeviceLabel(controller.meta)}`)) {\n      return\n    }\n\n    const vendorId = String(controller.meta.vendorId)\n    const productId = String(controller.meta.productId)\n    const products = this.savedControllers[vendorId]\n    delete products[productId]\n\n    this.saveControllers()\n  }\n\n  saveController(controller: IDeviceMetaState) {\n    const vendorId = controller.meta.vendorId\n    const products = this.savedControllers[vendorId] = this.savedControllers[vendorId] || {}\n    const productId = controller.meta.productId\n\n    const saveData = { ...controller }\n    delete saveData.lastEvent\n    delete saveData.subscribed\n    delete saveData.recording\n    delete saveData.pressed\n\n    products[productId] = saveData\n\n    this.saveControllers()\n  }\n\n  saveControllers() {\n    this.wssSend(SocketMessageType.SAVECONTROLLERS, this.savedControllers)\n  }\n\n  addTestController() {\n    this.controllers.push(testController)\n    this.devices.push({\n      map: {},\n      subscribed: false,\n      lastEvent: [],\n      meta: testController\n    })\n  }\n\n  fetchSavedControllers() {\n    this.wssSend(SocketMessageType.GETSAVEDCONTROLLERS)\n  }\n\n  wssSend(type: SocketMessageType, data?: any) {\n    const payload = {type, data}\n    this.debug.lastPayload = payload\n    this.connection.send(JSON.stringify(payload))\n    return this\n  }\n\n  fetchUsbDevices() {\n    this.wssSend(SocketMessageType.REFRESH)\n  }\n\n  getSavedControllers() {\n    this.wssSend(SocketMessageType.GETSAVEDCONTROLLERS)\n  }\n\n  listenToDevice(device: IDeviceMeta) {\n    console.log('device', device)\n    const stringRef = getDeviceLabel(device)\n\n    this.log({\n      message: `attempting to listen to ${stringRef}`, device\n    })\n\n    let type: SocketMessageType = SocketMessageType.LISTENTODEVICE\n\n    const savedControllers =  Object.values(this.savedControllers).reduce((all, current) => [...all,...Object.values(current)], [])\n    const savedController = savedControllers.find(\n      xSaved => devicesMatch(device, xSaved.meta)\n    )\n\n    if (savedController) {\n      this.savedController = savedController\n    }\n\n    const deviceMatch = this.listeners.find(xDevice => devicesMatch(device, xDevice.meta))\n    if(deviceMatch){\n      type = SocketMessageType.UNSUBSCRIBEDEVICE\n      delete deviceMatch.subscribed\n      const controller = this.deviceToController(deviceMatch.meta);\n      (controller as any).subscribed = false\n      console.log('controller --- ', controller);\n\n      this.log({\n        message: `Unsubscribed from ${stringRef}`\n      })\n\n      this.wssSend(type, device)\n      return\n    }\n\n    this.log({\n      message: `requesting web socket to listen to ${stringRef}`\n    })\n\n    this.wssSend(type, device)\n\n    if (device === testController) {\n      this.handleMessage({\n        type: SocketMessageType.LISTENERS,\n        data: {\n          devices: this.devices,\n          controllers: this.controllers,\n          event: {message:'test-event'},\n          device\n        }\n      })\n    }\n  }\n\n  deviceToController(device: IDeviceMeta) {\n    return this.controllers.find(control => devicesMatch(device, control))\n  }\n\n  error(error: any, ...extra) {\n    if (typeof error === 'string') {\n      error = new Error(error)\n    }\n    const readable = ack.error(error).toObject()\n    this.debug.lastLogs.error = {...readable, ...error, ...extra.reduce((all, one) => ({...all, ...one}), {})}\n    console.log('lastLogs.error updated')\n    console.error({error, ...extra})\n  }\n\n  warn(...data: any) {\n    this.debug.lastLogs.info = data\n    console.warn(data)\n  }\n\n  log(...data: any) {\n    this.debug.lastLogs.info = data\n\n    if (data[0].message) {\n      return console.log(data[0].message, data)\n    }\n\n    console.log(data)\n  }\n\n  stringUpdateSavedController(controller: DeviceProductLayout, newData: string) {\n    this.savedController = JSON.parse(newData)\n    this.saveController(this.savedController)\n  }\n\n  toggleIgnoreDeviceBit(item: IDeviceMetaState, index: number) {\n    item.ignoreBits = item.ignoreBits || []\n\n    const ignoreIndex = item.ignoreBits.indexOf(index)\n\n    if (ignoreIndex===-1) {\n      return item.ignoreBits.push(index)\n    }\n\n    item.ignoreBits.splice(ignoreIndex, 1)\n  }\n\n  downloadController(controller: DeviceProductLayout) {\n    const filename = getDeviceLabel(controller.meta) + '.json'\n    const data = JSON.stringify(controller, null, 2)\n    download(filename, data)\n  }\n\n  copyController(controller: DeviceProductLayout) {\n    copyText(JSON.stringify(controller, null, 2))\n  }\n}\n","<style>\n  textarea.code {\n    height:500px;width:100%;/*max-width: 500px;*/\n    min-width:300px;\n  }\n</style>\n<div style=\"display:flex;flex-wrap:wrap\" class=\"child-pad-xs child-margin-xs\">\n  <div class=\"flex2 border border-radius-10\">\n    <h3>Listeners: {{listeners.length}}</h3>\n    <textarea class=\"code\" wrap=\"off\" [style.height.em]=\"25 * listeners.length\">\n      {{listeners | json}}\n    </textarea>\n    <div *ngFor=\"let item of listeners\" class=\"flex-wrap flex-valign-center\">\n      <button (click)=\"saveController(item)\"\n      >save</button>\n      <button *ngIf=\"item.lastEvent\" (click)=\"item.idle = item.lastEvent\"\n      >capture idle</button>\n      <button *ngIf=\"item.idle\" [class.bg-warning]=\"item.recording\" (click)=\"toggleDeviceRecord(item)\"\n      >record</button>\n\n      <!-- visual bit map -->\n      <div class=\"flex\">\n        <div *ngFor=\"let value of item.lastEvent;let index=index\"\n          class=\"border radius-5 cursor-pointer\" style=\"margin:.3em;padding:.5em;\"\n          [class.bg-danger] = \"item.ignoreBits?.includes(index)\"\n          (click) = \"toggleIgnoreDeviceBit(item, index)\"\n        >{{'000' + value | slice : -3}}</div>\n      </div>\n\n      <!-- visual button map -->\n      <div style=\"display:flex;flex-wrap:wrap\">\n        <div>\n          <ng-container *ngFor=\"let button of item.map | keyvalue\">\n            <button type=\"button\" [disabled]=\"button.value.pressed\">{{button.key}}</button>\n          </ng-container>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"flex-1 border border-radius-10\">\n    <h3>Controllers</h3>\n    <p>\n      <button type=\"button\" (click)=\"addTestController()\">add test controller</button>\n    </p>\n    <div class=\"flex-wrap\">\n      <div style=\"display:flex;flex-wrap: wrap;\">\n        <div *ngFor=\"let item of controllers\">\n          <button type=\"button\" style=\"margin:.5em;font-size:1.1em;padding:.4em;\"\n            (click)=\"listenToDevice(item)\"\n            [style.background-color] = \"item.subscribed && 'blue'\"\n            [style.color] = \"item.subscribed && 'white'\"\n          >\n            listen to {{ item.product || item.productId + ':' + item.vendorId }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"flex2 border border-radius-10\">\n    <h4>Other Devices</h4>\n    <div class=\"flex-wrap\">\n      <div *ngFor=\"let item of nonControllers\">\n        <button\n          type=\"button\" style=\"margin:.5em;\" (click)=\"listenToDevice(item)\"\n          [style.background-color] = \"item.subscribed && 'blue'\"\n          [style.color] = \"item.subscribed && 'white'\"\n        >\n          {{ item.product || item.productId + ':' + item.vendorId }}\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"flex1 border border-radius-10\">\n    <h4>Saved Controllers</h4>\n    <div style=\"display:flex;flex-wrap: wrap;\">\n      <ng-container *ngFor=\"let vendor of savedControllers | keyvalue\">\n        <div *ngFor=\"let item of vendor.value | keyvalue\">\n          <button type=\"button\" style=\"margin:.5em;\"\n            (click)=\"savedController = item.value\"\n            [style.background-color] = \"savedController === item.value && 'blue' || null\"\n            [style.color] = \"savedController === item.value && 'white' || null\"\n          >\n            {{ item.value.meta.product || item.value.meta.productId + ':' + item.value.meta.vendorId }}\n          </button>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n\n  <div class=\"flex1 border border-radius-10\" *ngIf=\"savedController\">\n    <h3>Saved Controller: {{ savedController.meta.product || savedController.meta.productId + ':' + item.value.meta.vendorId }}</h3>\n    <p>Details of past connected and saved controllers</p>\n    <textarea class=\"code\" wrap=\"off\" (change)=\"stringUpdateSavedController(savedController,$event.target.value)\">{{savedController | json}}</textarea>\n    <button (click)=\"saveControllers()\">save</button>\n    <button (click)=\"downloadController(savedController)\">download</button>\n    <button (click)=\"copyController(savedController)\">copy</button>\n    <button (click)=\"confirmDeleteController(savedController)\">delete</button>\n  </div>\n\n  <div class=\"flex1 flex-wrap border border-radius-10\">\n    <h3>Devices: {{devices.length}}</h3>\n    <textarea class=\"code\" wrap=\"off\">{{devices | json}}</textarea>\n  </div>\n\n  <div class=\"flex1 flex-wrap border border-radius-10\">\n    <h3>Controllers: {{controllers.length}}</h3>\n    <textarea class=\"code\" wrap=\"off\">{{controllers | json}}</textarea>\n  </div>\n\n  <div *ngIf=\"debug.lastLogs.error\" class=\"flex2 border border-radius-10 bg-warning\">\n    <h3>Recent error occurred</h3>\n    <p *ngIf=\"debug.lastLogs.error.message\">{{debug.lastLogs.error.message}}</p>\n    <textarea class=\"code\">{{debug.lastLogs.error | json}}</textarea>\n  </div>\n\n  <!--  DEBUG PANEL -->\n  <div class=\"flex2 border border-radius-10\">\n    <h3>debug</h3>\n    <textarea class=\"code\" wrap=\"off\">\n      {{debug | json}}\n    </textarea>\n  </div>\n</div>\n\n\n\n\n\n<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { IDeviceMetaState } from './app.utils'\nimport { ButtonsMap, IButtonState } from '../../../shared/typings'\n\n\nexport default function decodeDeviceMetaState(metaState: IDeviceMetaState): string[] {\n  const pressedButtons = []\n\n  if (!metaState.map || !metaState.lastEvent) {\n    return pressedButtons\n  }\n\n  const changedMap = getButtonMapByEvent(metaState.map, metaState.lastEvent)\n\n  return Object.keys(changedMap).filter((buttonName) => {\n    const current = changedMap[buttonName]\n    const currentPos = current.pos\n    const stateValue: number = metaState.lastEvent[currentPos]\n\n    // direct value match\n    if (current.value === stateValue) {\n      return true\n    } else {\n      const currentValue: number = current.value - current.idle\n\n      // combined value match\n      const match = Object.keys(changedMap).find((otherBtnName) => {\n        if (otherBtnName === buttonName) {\n          return false\n        }\n\n        const compareMeta = changedMap[otherBtnName]\n\n        if (compareMeta.pos !== current.pos) {\n          return false\n        }\n\n        const compareValue: number = compareMeta.value - compareMeta.idle\n        const testValue = current.idle + compareValue + currentValue//15 + 16 + 16 === 47\n        if (testValue === stateValue) {\n          return true\n        }\n      })\n\n      if (match) {\n        return true\n      }\n    }\n\n    return false\n  })\n}\n\nfunction getButtonMapByEvent(map: ButtonsMap, currentBits: number[]): {[buttonName: string]: IButtonState} {\n  return currentBits.reduce((all, current, index) => {\n    Object.keys(map)\n      .filter((buttonName) =>\n        map[buttonName].pos === index && map[buttonName].idle !== current\n      )\n      .forEach(buttonName => all[buttonName] = map[buttonName])\n\n      return all\n  }, {})\n}","export default function delayLog(...args) {\nsetTimeout(() => console.log(...args), 300);\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}